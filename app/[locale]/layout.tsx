"use client"
// import type { Metadata } from "next";
import { NextUiProvider } from "@/providers/nextui.provider";
import { LangProvider } from "@/providers/lang.provider";
import { FooterSection } from "@/sections/footer.section";
import { useParams } from "next/navigation";
import { AuthentificatedNavbarSection } from "@/sections/authentificated.navbar.section";
import { useEffect } from "react";
import { useUserInfoStore } from "@/stores/userinfo.store";
import { NavbarSection } from "@/sections/navbar.section";
// import { AuthentificatedNavbarSection } from "@/sections/authentificated.navbar.section";


// export const metadata: Metadata = {
//   title: "Create Next App",
//   description: "Generated by create next app",
// };


export default function RootLayout({
  children
}: Readonly<{
  children: React.ReactNode;
}>) {
  const params = useParams();
  const { fetchUserInfo, userInfo, isLoading } = useUserInfoStore();

  const locale = params.locale;

  useEffect(() => {
    fetchUserInfo();

  }, []);

  return (
    <section
      className="font-poppins "
    >
      <NextUiProvider>
        <LangProvider locale={locale as string}>

          {/* navbar */}
          {(!isLoading && userInfo?.id) ? <AuthentificatedNavbarSection /> : <NavbarSection />}


          {/* main */}
          <main >
            {children}

          </main>

          {/* <SwitchThemeComponent /> */}

          {/* footer */}
          <FooterSection />

        </LangProvider>

      </NextUiProvider>

    </section>
  );
}
